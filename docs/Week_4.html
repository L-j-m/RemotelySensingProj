<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Learning Diary of CASA0023 Remotely Sensing Cities and Environments 23/24 - 4&nbsp; Policy</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./GEE.html" rel="next">
<link href="./Week_3.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Week_4.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Policy</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Learning Diary of CASA0023 Remotely Sensing Cities and Environments 23/24</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Week 1 Introduction to Remote Sensing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Week 2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Week 3</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week_4.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Policy</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./GEE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Google Earth Engine</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Classification_I.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Classification_I</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Classification_II.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Classification_II</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./SAR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">SAR</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="header-section-number">4.1</span> Summary</a>
  <ul class="collapse">
  <li><a href="#sustainability-challenge-in-shanghai" id="toc-sustainability-challenge-in-shanghai" class="nav-link" data-scroll-target="#sustainability-challenge-in-shanghai"><span class="header-section-number">4.1.1</span> Sustainability challenge in Shanghai</a></li>
  <li><a href="#relevant-policies" id="toc-relevant-policies" class="nav-link" data-scroll-target="#relevant-policies"><span class="header-section-number">4.1.2</span> Relevant policies</a></li>
  </ul></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="header-section-number">4.2</span> Application</a></li>
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection"><span class="header-section-number">4.3</span> Reflection</a></li>
  <li><a href="#reference" id="toc-reference" class="nav-link" data-scroll-target="#reference"><span class="header-section-number">4.4</span> Reference</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Policy</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="summary" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="summary"><span class="header-section-number">4.1</span> Summary</h2>
<section id="sustainability-challenge-in-shanghai" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="sustainability-challenge-in-shanghai"><span class="header-section-number">4.1.1</span> Sustainability challenge in Shanghai</h3>
<p>As the main place of economic and production activities, cities are responsible for the most part of carbon emission. Shanghai is one of the biggest cities in China, gathering dense population and growing its economic rapidly, which makes a high energy demand. Though the energy intensity has already declined by the optimizition of industry structure, the CO2 emission is still higher than some other provinces (<a href="https://www.mdpi.com/2071-1050/14/22/15045#B6-sustainability-14-15045">Gao and Pan, 2022</a>). There are two ways of carbon neutrality: one is to reduce the source emission, another is to capture and absorb the CO2. Carbon sink is the term that describes CO2 absorption. Generally, there are green and blue carbon sink, which refer to forest and sea. The CO2 could be absorbed by the plants in the photosynthesis process, and therefore it reduce carbon in the air.</p>
<p>Chongming district is the world largest alluvial island, and it occupies around 20% area of Shanghai (1411/6340 km2). The forest area and theirs ability of carbon sink is supposed to balance the carbon emission within the island, however, though policy has restricted the construction development, local implementation didn’t fully comply with the policy. The construction land, which converted from cropland, achieved 20% in 2013 while the restriction was 13% in 2020 (<a href="https://www.sciencedirect.com/science/article/pii/S0921344917300678?casa_token=a3IJsYQ_gowAAAAA:3ZmwU70vJjq2NNqK4qt90RtjxnsuP7sV23r3HQUBSQYUswJwzQVzIvSjtLWAw-0aBlDyHtB3pVI">Guo et al., 2017</a>). This expansion highly impact the carbon cycle balance.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="1-s2.0-S0921344917300678-gr2_lrg.jpg" class="img-fluid figure-img" width="577"></p>
<figcaption class="figure-caption">The Chongming Island (Guo et al., 2017)</figcaption>
</figure>
</div>
<p>In effect, relevant policies have been released in terms of emission reduction, but challenges still exist in the practical level. The balance between abatement and economic development is generally not easy, as the performance of local government is currently measured by local economy. Therefore, it’s necessary to establish new criteria of assessment align with the ecodevelopment.</p>
</section>
<section id="relevant-policies" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="relevant-policies"><span class="header-section-number">4.1.2</span> Relevant policies</h3>
<p>In the international level, the Paris Agreement was established by the UN Framework Convention on Climate Change in 2016. This conference asked participating countries to update their Nationally Determined Contributions (NDCs) every few years. This NDC is the environmental protection object againsts global warming in the national level. China’s latest version of NDC had been updated in 2021, and the key points are:</p>
<ol type="1">
<li><p>lower CO2 emission per GDP by over 65% from 2005 level.</p></li>
<li><p>increase the share of non-fossil fuels in primary energy consumption to around 25%,</p></li>
<li><p>increase the forest stock volume by 6 billion m3 from the 2005 level,</p></li>
<li><p>bring its total installed capacity of wind and solar power to over 1.2 billion kW.</p></li>
</ol>
<p>In terms of the domestic policy, <a href="https://www.sciencedirect.com/science/article/pii/S2666498421000545">Hepburn et al.&nbsp;(2021)</a> summarized the specific measure that China would implement during the 14<sup>th</sup> Five-year period (2021-2025) for achieving carbon neutrality goal by 2060. There is a “1 + N” policy system. The “1” refers to two documents (The <a href="https://www.gov.cn/zhengce/2021-10/24/content_5644613.htm">Guideline</a> and the <a href="https://www.gov.cn/zhengce/content/2021-10/26/content_5644984.htm">Action Plan</a>), which are general policies. The “N” refers to supportive and implementation plan in specific fields and industries (<a href="https://www.gov.cn/zhengce/zhengceku/2022-11/01/content_5723071.htm">i.e.</a>).</p>
<p>In local level, Shanghai government has released local <a href="https://www.ndrc.gov.cn/fggz/hjyzy/tdftzh/202208/t20220808_1332758_ext.html">Implementation Plan</a> in 2022, which aligns with the national level policy requirement. Specific local industries were considered in the local policy.</p>
</section>
</section>
<section id="application" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="application"><span class="header-section-number">4.2</span> Application</h2>
<p>In terms of promoting sustainable development in Shanghai, remote sensing could be useful in detecting two aspects: emission detection and carbon sink.</p>
<ul>
<li>Emissions detection</li>
</ul>
<p>To spatialized the carbon emission, night time light (NTL) remote sensing data could be used to located the place with potentially high pollution. It’s needed to combine the map with other economic and energy consumption data, which helps to understand the hidden reason of emission (<a href="https://www.sciencedirect.com/science/article/pii/S001393512300049X?casa_token=M7iuWtJn_bMAAAAA:WraEXXC-xrrSbjLZYc8MNx6G-Q5YpiD2Jm3mcJHGQ3CpvsTMMVWrOYjItzlKM6Ps9kOodn1UKkY">Gao et al., 2023</a>). In this case, the remote sensing data is one of the indicators used to measure the carbon emission.</p>
<p>Some satellites are typically used for CO2 detection (<a href="https://earth.esa.int/eogateway/missions/gosat">GOSAT</a>, <a href="https://ocov2.jpl.nasa.gov/">OCO-2</a>, and <a href="https://earth.esa.int/eogateway/missions/tansat">TanSat</a>). However, the current satellites have limit resolution to locate the exact emission source (<a href="https://www.mdpi.com/2072-4292/15/20/4904">Wu et al., 2023</a>).</p>
<ul>
<li>Carbon sink measurement</li>
</ul>
<p>As called green carbon sink, the structure of forest, i.e.&nbsp;species of trees, age of trees, is highly related to its ability of capturing carbon (<a href="https://www.mdpi.com/2072-4292/15/1/183">Zhang et al., 2022</a>). Using remote sensing could obtain the information of carbon sink quicker and more accurate than conventional filed team survey.</p>
</section>
<section id="reflection" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="reflection"><span class="header-section-number">4.3</span> Reflection</h2>
<p>The application of remote sensing is basically monitoring the carbon emission source and carbon sink area. It can help to identify the area with high carbon emission, and the carbon storage potential in certain area, such as wetland, forest. Technically, the remote sensing could not actually reduce the carbon emission, but it could play a role as a verification tool which provides the evidence that the carbon emission is reduced. In practice, the information from bottom-up should be combined with the observation data from remotely sensing, which is top-down, could help policy maker to verify the result of work.</p>
<p>The advantage of using observation data from remote sensing satellite is its efficiency. Satellites have wide vision that could cover thousands square kilometers area while having less than 1 meter resolution, and the installation of local sensor would be not necessary.</p>
</section>
<section id="reference" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="reference"><span class="header-section-number">4.4</span> Reference</h2>
<p><a href="https://www.sciencedirect.com/science/article/pii/S2666498421000545">Hepburn, C., Qi, Y., Stern, N., Ward, B., Xie, C. and Zenghelis, D., 2021. Towards carbon neutrality and China’s 14th Five-Year Plan: Clean energy transition, sustainable urban development, and investment priorities. Environmental Science and Ecotechnology, 8, p.100130.</a></p>
<p><a href="https://www.sciencedirect.com/science/article/pii/S001393512300049X?casa_token=M7iuWtJn_bMAAAAA:WraEXXC-xrrSbjLZYc8MNx6G-Q5YpiD2Jm3mcJHGQ3CpvsTMMVWrOYjItzlKM6Ps9kOodn1UKkY">Gao, F., Wu, J., Xiao, J., Li, X., Liao, S. and Chen, W., 2023. Spatially explicit carbon emissions by remote sensing and social sensing. <em>Environmental Research</em>, <em>221</em>, p.115257.</a></p>
<p><a href="https://www.mdpi.com/2071-1050/14/22/15045#B6-sustainability-14-15045">Gao, J. and Pan, L., 2022. A System Dynamic Analysis of Urban Development Paths under Carbon Peaking and Carbon Neutrality Targets: A Case Study of Shanghai. <em>Sustainability</em>, <em>14</em>(22), p.15045.</a></p>
<p><a href="https://www.sciencedirect.com/science/article/pii/S0921344917300678?casa_token=a3IJsYQ_gowAAAAA:3ZmwU70vJjq2NNqK4qt90RtjxnsuP7sV23r3HQUBSQYUswJwzQVzIvSjtLWAw-0aBlDyHtB3pVI">Guo, R., Zhao, Y., Shi, Y., Li, F., Hu, J. and Yang, H., 2017. Low carbon development and local sustainability from a carbon balance perspective. <em>Resources, Conservation and Recycling</em>, <em>122</em>, pp.270-279.</a></p>
<p><a href="https://www.mdpi.com/2072-4292/15/20/4904">Wu, K., Yang, D., Liu, Y., Cai, Z., Zhou, M., Feng, L. and Palmer, P.I., 2023. Evaluating the Ability of the Pre-Launch TanSat-2 Satellite to Quantify Urban CO2 Emissions. <em>Remote Sensing</em>, <em>15</em>(20), p.4904.</a></p>
<p><a href="https://www.mdpi.com/2072-4292/15/1/183">Zhang, Y., Lu, D., Jiang, X., Li, Y. and Li, D., 2022. Forest structure simulation of eucalyptus plantation using remote-sensing-based forest age data and 3-pg model. <em>Remote Sensing</em>, <em>15</em>(1), p.183.</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Week_3.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Week 3</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./GEE.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Google Earth Engine</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>